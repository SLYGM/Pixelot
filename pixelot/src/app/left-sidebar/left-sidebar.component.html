<div id="left-sidebar">
  <mat-accordion multi displayMode="flat" *ngIf="scene">
    <mat-expansion-panel *ngFor="let layer of layerNames; index as i">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{layer}}
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngFor="let entity of layerEntities[i]">
        <span
          [matMenuTriggerFor]="menu"
          [matMenuTriggerData]="{ entity: entity }"
          #menuTrigger="matMenuTrigger"
        >
        </span>
        <button mat-button (click)="selectEntity(entity)" (contextmenu)="handleEntityRightclick($event)">
          {{entity}}
        </button>
      </ng-container>
      <mat-action-row>
        <button *ngIf="layer!='default'" mat-stroked-button color="warn" (click)="removeLayer(layer)">Remove Layer</button>
      </mat-action-row>

    </mat-expansion-panel>
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          No Layer
        </mat-panel-title>
      </mat-expansion-panel-header>
      <ng-container *ngFor="let entity of otherEntities">
        <button mat-button (click)="selectEntity(entity)">
          {{entity}}
        </button>
      </ng-container>
    </mat-expansion-panel>
  </mat-accordion>
  <button mat-raised-button id="add-entity-button" (click)="openEntityDialog()" >Add Entity</button>
  <button mat-raised-button id="add-layer-button" [matMenuTriggerFor]="menu">Add Layer</button>
  <mat-menu #menu="matMenu">
    <button mat-menu-item id="add-layer-button" (click)="openLayerDialog('sprite')">Sprite Layer</button>
    <button mat-menu-item id="add-layer-button" (click)="openLayerDialog('tilemap')">Tile Layer</button>
  </mat-menu>
</div>

<mat-menu #menu="matMenu">
  <ng-template matMenuContent let-entity="entity">
    <button mat-menu-item (click)="deleteEntity(entity)">Delete</button>
  </ng-template>
</mat-menu>
